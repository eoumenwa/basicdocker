### basicdocker

https://docs.docker.com/engine/install/ubuntu/

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads

$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28

The authenticity of host '20.124.104.28 (20.124.104.28)' can't be established.

ECDSA key fingerprint is SHA25 

Are you sure you want to continue connecting (yes/no/[fingerprint])? yes

Warning: Permanently added '20.124.104.28' (ECDSA) to the list of known hosts.

Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com

* Management:     https://landscape.canonical.com

* Support:        https://ubuntu.com/advantage

  System information as of Fri Nov 19 02:10:21 UTC 2021

  System load:  0.0               Processes:             127      

Usage of /:   4.6% of 28.90GB   Users logged in:       0        

Memory usage: 3%                IPv4 address for eth0: 10.0.0.4 

Swap usage:   0%

1 update can be applied immediately.

To see these additional updates run: apt list --upgradable


The list of available updates is more than a week old.

To check for new updates run: sudo apt update


The programs included with the Ubuntu system are free software; the exact distribution terms for each program are described in the


individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law.

To run a command as administrator (user "root"), use "sudo <command>".

See "man sudo_root" for details.

azureuser@ubuntu-vm:~$ hostnamectl

Static hostname: ubuntu-vm

Icon name: computer-vm

Chassis: vm

Machine ID: bc3fe1188f2c49a6bdacc7486d2f695d

Boot ID: 6f3637c5440c4767b637dc2bb405677d

Virtualization: microsoft

Operating System: Ubuntu 20.04.3 LTS

Kernel: Linux 5.11.0-1021-azure


Architecture: x86-64

azureuser@ubuntu-vm:~$  sudo apt-get remove docker docker-engine docker.io containerd runc

Reading package lists... Done

Building dependency tree

Reading state information... Done

Package 'docker.io' is not installed, so not removed

E: Unable to locate package docker


E: Unable to locate package docker-engine

azureuser@ubuntu-vm:~$ sudo apt-get update

Hit:1 http://azure.archive.ubuntu.com/ubuntu focal InRelease
   
Get:10 http://azure.archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata [9136 B]

Fetched 20.6 MB in 3s (6515 kB/s)

Reading package lists... Done
azureuser@ubuntu-vm:~$

azureuser@ubuntu-vm:~$ sudo apt-get install \

>     ca-certificates \

>     curl \

>     gnupg \

>     lsb-release

Reading package lists... Done

Building dependency tree

Reading state information... Done

lsb-release is already the newest version (11.1.0ubuntu2).

lsb-release set to manually installed.

ca-certificates is already the newest version (20210119~20.04.2).

ca-certificates set to manually installed.

curl is already the newest version (7.68.0-1ubuntu2.7).

curl set to manually installed.

gnupg is already the newest version (2.2.19-3ubuntu2.1).

gnupg set to manually installed.

0 upgraded, 0 newly installed, 0 to remove and 24 not upgraded.

azureuser@ubuntu-vm:~$


azureuser@ubuntu-vm:~$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpgclient_loop: 

send disconnect: Connection reset by peer

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads

$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28

Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Fri Nov 19 02:53:40 UTC 2021

  System load:  0.0               Processes:             127
  Usage of /:   5.1% of 28.90GB   Users logged in:       0
  Memory usage: 3%                IPv4 address for eth0: 10.0.0.4
  Swap usage:   0%


18 updates can be applied immediately.
11 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable


Last login: Fri Nov 19 02:16:35 2021 from 73.152.119.181

azureuser@ubuntu-vm:~$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

azureuser@ubuntu-vm:~$ echo \
>   "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
>   $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
azureuser@ubuntu-vm:~$ sudo apt-get update
Hit:1 http://azure.archive.ubuntu.com/ubuntu focal InRelease
.
.
Fetched 184 kB in 0s (370 kB/s)
Reading package lists... Done
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ sudo apt-get install docker-ce docker-ce-cli containerd.io
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following additional packages will be installed:
  docker-ce-rootless-extras docker-scan-plugin pigz slirp4netns

Processing triggers for systemd (245.4-4ubuntu3.13) ...
azureuser@ubuntu-vm:~$ docker run hello-world
docker: Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post "http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/create": dial unix /var/run/docker.sock: connect: permission denied.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ sudo docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
2db29710123e: Pull complete
Digest: sha256:cc15c5b292d8525effc0f89cb299f1804f3a725c8d05e158653a563f15e4f685
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:

1. The Docker client contacted the Docker daemon.

2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)

3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.

4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:

$ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:  https://hub.docker.com/

For more examples and ideas, visit:

https://docs.docker.com/get-started/

azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 

azureuser@ubuntu-vm:~$ sudo groupadd docker

groupadd: group 'docker' already exists

azureuser@ubuntu-vm:~$ sudo usermod -aG docker $USER

azureuser@ubuntu-vm:~$ logout

Connection to 20.124.104.28 closed.

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads

$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28

Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Fri Nov 19 03:09:36 UTC 2021

  System load:  0.0               Processes:                128
  Usage of /:   6.7% of 28.90GB   Users logged in:          0
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4


18 updates can be applied immediately.

11 of these updates are standard security updates.

To see these additional updates run: apt list --upgradable


Last login: Fri Nov 19 02:53:40 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ docker run hello-world

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
 
 oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Thu Nov 25 18:34:07 UTC 2021

  System load:  1.21              Processes:                138
  Usage of /:   7.1% of 28.90GB   Users logged in:          0
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4


18 updates can be applied immediately.
11 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable


Last login: Fri Nov 19 03:09:36 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ ls
azureuser@ubuntu-vm:~$ ls -l
total 0
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE         COMMAND    CREATED      STATUS                  PORTS     NAMES
e7da0e4933e3   hello-world   "/hello"   6 days ago   Exited (0) 6 days ago             adoring_visvesvaraya
c22f9b018077   hello-world   "/hello"   6 days ago   Exited (0) 6 days ago             trusting_albattani
azureuser@ubuntu-vm:~$ docker images
REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -ti
"docker run" requires at least 1 argument.
See 'docker run --help'.

Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

Run a command in a new container
azureuser@ubuntu-vm:~$ docker run -ti ubunto:latest bash
Unable to find image 'ubunto:latest' locally
docker: Error response from daemon: pull access denied for ubunto, repository does not exist or may require 'docker login': denied: requested access to the resource is denied.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run -ti ubuntu:latest bash
Unable to find image 'ubuntu:latest' locally
latest: Pulling from library/ubuntu
7b1a6ab2e44d: Pull complete
Digest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322
Status: Downloaded newer image for ubuntu:latest
root@6d7eca1e7b24:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@6d7eca1e7b24:/# ls -la
total 56
drwxr-xr-x   1 root root 4096 Nov 25 19:22 .
drwxr-xr-x   1 root root 4096 Nov 25 19:22 ..
-rwxr-xr-x   1 root root    0 Nov 25 19:22 .dockerenv
lrwxrwxrwx   1 root root    7 Oct  6 16:47 bin -> usr/bin
drwxr-xr-x   2 root root 4096 Apr 15  2020 boot
drwxr-xr-x   5 root root  360 Nov 25 19:22 dev
drwxr-xr-x   1 root root 4096 Nov 25 19:22 etc
drwxr-xr-x   2 root root 4096 Apr 15  2020 home
lrwxrwxrwx   1 root root    7 Oct  6 16:47 lib -> usr/lib
lrwxrwxrwx   1 root root    9 Oct  6 16:47 lib32 -> usr/lib32
lrwxrwxrwx   1 root root    9 Oct  6 16:47 lib64 -> usr/lib64
lrwxrwxrwx   1 root root   10 Oct  6 16:47 libx32 -> usr/libx32
drwxr-xr-x   2 root root 4096 Oct  6 16:47 media
drwxr-xr-x   2 root root 4096 Oct  6 16:47 mnt
drwxr-xr-x   2 root root 4096 Oct  6 16:47 opt
dr-xr-xr-x 195 root root    0 Nov 25 19:22 proc
drwx------   2 root root 4096 Oct  6 16:58 root
drwxr-xr-x   5 root root 4096 Oct  6 16:58 run
lrwxrwxrwx   1 root root    8 Oct  6 16:47 sbin -> usr/sbin
drwxr-xr-x   2 root root 4096 Oct  6 16:47 srv
dr-xr-xr-x  12 root root    0 Nov 25 19:22 sys
drwxrwxrwt   2 root root 4096 Oct  6 16:58 tmp
drwxr-xr-x  13 root root 4096 Oct  6 16:47 usr
drwxr-xr-x  11 root root 4096 Oct  6 16:58 var
root@6d7eca1e7b24:/# cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=20.04
DISTRIB_CODENAME=focal
DISTRIB_DESCRIPTION="Ubuntu 20.04.3 LTS"
root@6d7eca1e7b24:/#
root@6d7eca1e7b24:/#
root@6d7eca1e7b24:/# exit
exit
azureuser@ubuntu-vm:~$ docker run -ti ubuntu:latest bash
root@8050290dd8e6:/# docker ps
bash: docker: command not found
root@8050290dd8e6:/# d   
bash: d: command not found
root@8050290dd8e6:/# exit
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE           COMMAND    CREATED          STATUS                        PORTS     NAMES
8050290dd8e6   ubuntu:latest   "bash"     13 minutes ago   Exited (127) 31 seconds ago             happy_wu
6d7eca1e7b24   ubuntu:latest   "bash"     19 minutes ago   Exited (0) 13 minutes ago               heuristic_leavitt
e7da0e4933e3   hello-world     "/hello"   6 days ago       Exited (0) 6 days ago                   adoring_visvesvaraya
c22f9b018077   hello-world     "/hello"   6 days ago       Exited (0) 6 days ago                   trusting_albattani
azureuser@ubuntu-vm:~$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
azureuser@ubuntu-vm:~$ docker run -ti ubuntu:latest bash
root@cd05574cf082:/#
root@cd05574cf082:/# 
root@cd05574cf082:/# 
root@cd05574cf082:/# 
root@cd05574cf082:/# touch MY-FILE-HERE 
root@cd05574cf082:/# LS
bash: LS: command not found
root@cd05574cf082:/# ls
MY-FILE-HERE  bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@cd05574cf082:/# exit
exit
azureuser@ubuntu-vm:~$ docker run -ti ubuntu:latest bash
root@832fc9b0f341:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@832fc9b0f341:/# client_loop: send disconnect: Connection reset by peer

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Fri Nov 26 11:26:45 UTC 2021

  System load:  0.77              Processes:                138
  Usage of /:   7.4% of 28.90GB   Users logged in:          0
  Memory usage: 3%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4


7 updates can be applied immediately.
To see these additional updates run: apt list --upgradable


Last login: Thu Nov 25 19:37:24 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ docker run -ti ubuntu bash
root@3c272caae2e1:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@3c272caae2e1:/# touch MY-IMPORTANT-FILE
root@3c272caae2e1:/# LS
bash: LS: command not found
root@3c272caae2e1:/# ls
MY-IMPORTANT-FILE  bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@3c272caae2e1:/# exit
exit
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE           COMMAND    CREATED          STATUS                      PORTS     NAMES
3c272caae2e1   ubuntu          "bash"     50 seconds ago   Exited (0) 8 seconds ago              stupefied_leavitt
832fc9b0f341   ubuntu:latest   "bash"     16 hours ago     Exited (129) 15 hours ago             hungry_brown
cd05574cf082   ubuntu:latest   "bash"     16 hours ago     Exited (0) 16 hours ago               hardcore_joliot
8050290dd8e6   ubuntu:latest   "bash"     16 hours ago     Exited (127) 16 hours ago             happy_wu
6d7eca1e7b24   ubuntu:latest   "bash"     16 hours ago     Exited (0) 16 hours ago               heuristic_leavitt
e7da0e4933e3   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 adoring_visvesvaraya
c22f9b018077   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 trusting_albattani
azureuser@ubuntu-vm:~$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
azureuser@ubuntu-vm:~$ docker commit 3c272caae2e1
sha256:a63d46cfeb1e3a5d2d1cb8f021179c4be9c4f44550915765b9c2d6173ef44375
azureuser@ubuntu-vm:~$ docker tag a63d46cfeb1e3a5d2d1cb8f021179c4be9c4f44550915765b9c2d6173ef44375 my-new-image
azureuser@ubuntu-vm:~$ docker images
REPOSITORY     TAG       IMAGE ID       CREATED         SIZE
my-new-image   latest    a63d46cfeb1e   2 minutes ago   72.8MB
ubuntu         latest    ba6acccedd29   5 weeks ago     72.8MB
hello-world    latest    feb5d9fea6a5   2 months ago    13.3kB
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker commit stupefied_leavitt
sha256:cf0cae96f0758bd3d7074c10bb2d90acf01d6998360a137a460cfeccf7326a71
azureuser@ubuntu-vm:~$ docker commit stupefied_leavitt my-new-image-2
sha256:e992c94f56402d0510f41f928231c6e6480bc65f383929c79792e17d0a3b1c80
azureuser@ubuntu-vm:~$ docker images
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
my-new-image-2   latest    e992c94f5640   12 seconds ago   72.8MB
<none>           <none>    cf0cae96f075   58 seconds ago   72.8MB
my-new-image     latest    a63d46cfeb1e   7 minutes ago    72.8MB
ubuntu           latest    ba6acccedd29   5 weeks ago      72.8MB
hello-world      latest    feb5d9fea6a5   2 months ago     13.3kB
azureuser@ubuntu-vm:~$ docker run -ti my-new-image
root@4a668fd8935a:/# ls
MY-IMPORTANT-FILE  bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@4a668fd8935a:/# exit
exit
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE           COMMAND    CREATED          STATUS                      PORTS     NAMES
4a668fd8935a   my-new-image    "bash"     10 minutes ago   Exited (0) 2 minutes ago              naughty_moore
3c272caae2e1   ubuntu          "bash"     24 minutes ago   Exited (0) 23 minutes ago             stupefied_leavitt
832fc9b0f341   ubuntu:latest   "bash"     16 hours ago     Exited (129) 16 hours ago             hungry_brown
cd05574cf082   ubuntu:latest   "bash"     16 hours ago     Exited (0) 16 hours ago               hardcore_joliot
8050290dd8e6   ubuntu:latest   "bash"     16 hours ago     Exited (127) 16 hours ago             happy_wu
6d7eca1e7b24   ubuntu:latest   "bash"     16 hours ago     Exited (0) 16 hours ago               heuristic_leavitt
e7da0e4933e3   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 adoring_visvesvaraya
c22f9b018077   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 trusting_albattani
azureuser@ubuntu-vm:~$ docker images
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
my-new-image-2   latest    e992c94f5640   14 minutes ago   72.8MB
<none>           <none>    cf0cae96f075   15 minutes ago   72.8MB
my-new-image     latest    a63d46cfeb1e   22 minutes ago   72.8MB
ubuntu           latest    ba6acccedd29   5 weeks ago      72.8MB
hello-world      latest    feb5d9fea6a5   2 months ago     13.3kB
azureuser@ubuntu-vm:~$ docker commit stupefied_leavitt my-new-image
sha256:a44fd084ac55411392a2e27f515000f48dd6c25710bfc551678ef2150ee392a0
azureuser@ubuntu-vm:~$ docker images
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
my-new-image     latest    a44fd084ac55   13 seconds ago   72.8MB
my-new-image-2   latest    e992c94f5640   17 minutes ago   72.8MB
<none>           <none>    cf0cae96f075   18 minutes ago   72.8MB
<none>           <none>    a63d46cfeb1e   24 minutes ago   72.8MB
ubuntu           latest    ba6acccedd29   5 weeks ago      72.8MB
hello-world      latest    feb5d9fea6a5   2 months ago     13.3kB
azureuser@ubuntu-vm:~$ docker commit stupefied_leavitt my-new-image
sha256:781a84385cd9d2bf709302268c598bb18a5a4b7bf2a6f185a5fbc50440b3db15
azureuser@ubuntu-vm:~$ docker images
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
my-new-image     latest    781a84385cd9   7 seconds ago    72.8MB
<none>           <none>    a44fd084ac55   40 seconds ago   72.8MB
my-new-image-2   latest    e992c94f5640   17 minutes ago   72.8MB
<none>           <none>    cf0cae96f075   18 minutes ago   72.8MB
<none>           <none>    a63d46cfeb1e   25 minutes ago   72.8MB
ubuntu           latest    ba6acccedd29   5 weeks ago      72.8MB
hello-world      latest    feb5d9fea6a5   2 months ago     13.3kB
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE           COMMAND    CREATED          STATUS                      PORTS     NAMES
4a668fd8935a   a63d46cfeb1e    "bash"     15 minutes ago   Exited (0) 7 minutes ago              naughty_moore
3c272caae2e1   ubuntu          "bash"     29 minutes ago   Exited (0) 28 minutes ago             stupefied_leavitt
832fc9b0f341   ubuntu:latest   "bash"     16 hours ago     Exited (129) 16 hours ago             hungry_brown
cd05574cf082   ubuntu:latest   "bash"     16 hours ago     Exited (0) 16 hours ago               hardcore_joliot
8050290dd8e6   ubuntu:latest   "bash"     16 hours ago     Exited (127) 16 hours ago             happy_wu
6d7eca1e7b24   ubuntu:latest   "bash"     17 hours ago     Exited (0) 16 hours ago               heuristic_leavitt
e7da0e4933e3   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 adoring_visvesvaraya
c22f9b018077   hello-world     "/hello"   7 days ago       Exited (0) 7 days ago                 trusting_albattani
azureuser@ubuntu-vm:~$ docker run -ti my-new-image-2
root@2aa93973438e:/# ls
MY-IMPORTANT-FILE  bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@2aa93973438e:/# client_loop: send disconnect: Connection reset by peer

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$





oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Sat Nov 27 10:50:20 UTC 2021      

  System load:  0.1               Processes:                130
  Usage of /:   7.4% of 28.90GB   Users logged in:          0
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4

FROM debian:sid

7 updates can be applied immediately.
To see these additional updates run: apt list --upgradable   


Last login: Fri Nov 26 11:26:46 2021 from 73.152.119.181     
azureuser@ubuntu-vm:~$ ls
azureuser@ubuntu-vm:~$ mkdir example
azureuser@ubuntu-vm:~$ cd example/
azureuser@ubuntu-vm:~/example$ ls
azureuser@ubuntu-vm:~/example$ vim Dockerfile
azureuser@ubuntu-vm:~/example$ docker build -t hello .       
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM busybox
latest: Pulling from library/busybox
e685c5c858e3: Pull complete
Digest: sha256:e7157b6d7ebbe2cce5eaa8cfe8aa4fa82d173999b9f90a9ec42e57323546c353
Status: Downloaded newer image for busybox:latest
 ---> 7138284460ff
Step 2/3 : RUN echo "building simple docker image."
 ---> Running in e978300503c2
building simple docker image.
Removing intermediate container e978300503c2
 ---> bda49e8be9a4
Step 3/3 : CMD echo "Hello Container"
 ---> Running in e01e85b59de5
Removing intermediate container e01e85b59de5
 ---> 51de49ea5263
Successfully built 51de49ea5263
Successfully tagged hello:latest
azureuser@ubuntu-vm:~/example$ docker run --rm hello
Hello Container
azureuser@ubuntu-vm:~/example$ ls
Dockerfile
azureuser@ubuntu-vm:~/example$ vi Dockerfile
azureuser@ubuntu-vm:~/example$ docker build -t example/nanoer"docker build" requires exactly 1 argument.
See 'docker build --help'.

Usage:  docker build [OPTIONS] PATH | URL | -

Build an image from a Dockerfile
azureuser@ubuntu-vm:~/example$ docker build -t example/nanoer .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM debian:sid
sid: Pulling from library/debian
0fef5443775f: Pull complete
Digest: sha256:443457d19b8e3b91eff42d6d593296d260170314917b21074ece5c1654faa034
Status: Downloaded newer image for debian:sid
 ---> 484ec39d2458
Step 2/4 : RUN apt-get -y update
 ---> Running in 8c9777436cae
Get:1 http://deb.debian.org/debian sid InRelease [165 kB]
Get:2 http://deb.debian.org/debian sid/main amd64 Packages [8891 kB]
FROM debian:sid
Fetched 9056 kB in 2s (5565 kB/s)
Reading package lists...
Removing intermediate container 8c9777436cae
 ---> 913ff2e46b29
Step 3/4 : RUN apt-get install nano
 ---> Running in b808acc1180b
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libgpm2 libncursesw6 libtinfo6 ncurses-bin
Suggested packages:
  gpm hunspell
The following NEW packages will be installed:
  libgpm2 libncursesw6 nano
The following packages will be upgraded:
  libtinfo6 ncurses-bin
2 upgraded, 3 newly installed, 0 to remove and 16 not upgraded.
Need to get 1652 kB of archives.
After this operation, 3267 kB of additional disk space will be used.
Do you want to continue? [Y/n] Abort.
The command '/bin/sh -c apt-get install nano' returned a non-zero code: 1


azureuser@ubuntu-vm:~/example$ docker build -t example/nanoer .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM debian:sid      
 ---> 484ec39d2458
Step 2/4 : RUN apt-get -y update
 ---> Using cache
 ---> 913ff2e46b29
Step 3/4 : RUN yes | apt-get install nano    ########################### error resolved
 ---> Running in 819cb385769b
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libgpm2 libncursesw6 libtinfo6 ncurses-bin        
Suggested packages:
  gpm hunspell     
The following NEW packages will be installed:
  libgpm2 libncursesw6 nano
The following packages will be upgraded:
  libtinfo6 ncurses-bin
2 upgraded, 3 newly installed, 0 to remove and 16 not upgraded.
Need to get 1652 kB of archives.
After this operation, 3267 kB of additional disk space will be used.
Do you want to continue? [Y/n] Get:1 http://deb.debian.org/debian sid/main amd64 libtinfo6 amd64 6.3-1 [349 kB]
Get:2 http://deb.debian.org/debian sid/main amd64 ncurses-bin amd64 6.3-1 [439 kB]
Get:3 http://deb.debian.org/debian sid/main amd64 libncursesw6 amd64 6.3-1 [133 kB]
Get:4 http://deb.debian.org/debian sid/main amd64 nano amd64 
5.9-1 [695 kB]
Get:5 http://deb.debian.org/debian sid/main amd64 libgpm2 amd64 1.20.7-9 [35.8 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 1652 kB in 0s (51.2 MB/s)
(Reading database ... 6665 files and directories currently installed.)
Preparing to unpack .../libtinfo6_6.3-1_amd64.deb ...        
Unpacking libtinfo6:amd64 (6.3-1) over (6.2+20210905-1) ...
Setting up libtinfo6:amd64 (6.3-1) ...
(Reading database ... 6665 files and directories currently installed.)
Preparing to unpack .../ncurses-bin_6.3-1_amd64.deb ...      
Unpacking ncurses-bin (6.3-1) over (6.2+20210905-1) ...
Setting up ncurses-bin (6.3-1) ...
Selecting previously unselected package libncursesw6:amd64.
(Reading database ... 6665 files and directories currently installed.)
Preparing to unpack .../libncursesw6_6.3-1_amd64.deb ...     
Unpacking libncursesw6:amd64 (6.3-1) ...
Selecting previously unselected package nano.
Preparing to unpack .../archives/nano_5.9-1_amd64.deb ...
Unpacking nano (5.9-1) ...
Selecting previously unselected package libgpm2:amd64.
Preparing to unpack .../libgpm2_1.20.7-9_amd64.deb ...
Unpacking libgpm2:amd64 (1.20.7-9) ...
Setting up libgpm2:amd64 (1.20.7-9) ...
Setting up libncursesw6:amd64 (6.3-1) ...
Setting up nano (5.9-1) ...
update-alternatives: using /bin/nano to provide /usr/bin/editor (editor) in auto mode
update-alternatives: using /bin/nano to provide /usr/bin/pico (pico) in auto mode
Processing triggers for libc-bin (2.32-4) ...
Removing intermediate container 819cb385769b
 ---> a22086808562
Step 4/4 : CMD ["usr/bin/nano", "/tmp/notes"]
 ---> Running in 8cdb3b3d57a0
Removing intermediate container 8cdb3b3d57a0
 ---> 0a954523f777
Successfully built 0a954523f777
Successfully tagged example/nanoer:latest
azureuser@ubuntu-vm:~/example$ 


azureuser@ubuntu-vm:~/example$ docker run --rm -ti nanoer       
Unable to find image 'nanoer:latest' locally
docker: Error response from daemon: pull access denied for nanoer, repository does not exist or may require 'docker login': denied: requested access to the resource is denied.
See 'docker run --help'.
azureuser@ubuntu-vm:~/example$ docker run --rm -ti example/nanoer
azureuser@ubuntu-vm:~/example$ 


azureuser@ubuntu-vm:~/example$ ls
Dockerfile
azureuser@ubuntu-vm:~/example$ vi Dockerfile
azureuser@ubuntu-vm:~/example$ vi notes.txt
azureuser@ubuntu-vm:~/example$ docker build -t example/notes .
Sending build context to Docker daemon  3.072kB
Step 1/3 : FROM example/nanoer
 ---> 29d9e57cfcd6
Step 2/3 : ADD notes.txt /notes.txt
 ---> d8bdc268a040
Step 3/3 : CMD ["/bin/nano", "/notes.txt"]
 ---> Running in edae4432e75f
Removing intermediate container edae4432e75f
 ---> 4c5463352d1c
Successfully built 4c5463352d1c
Successfully tagged example/notes:latest
azureuser@ubuntu-vm:~/example$ 




azureuser@ubuntu-vm:~/example$ docker run -ti --rm example/notes

This displays the conent saved in notes.txt
 
azureuser@ubuntu-vm:~/example$ 



oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads   
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com    
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Sun Nov 28 11:09:58 UTC 2021

  System load:  0.08              Processes:  
              130
  Usage of /:   8.0% of 28.90GB   Users logged in:          0
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4


15 updates can be applied immediately.        
To see these additional updates run: apt list 
--upgradable


Last login: Sat Nov 27 11:26:23 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ docker run --rm -ti ubuntu sleep 5
azureuser@ubuntu-vm:~$ docker run -ti ubuntu bash -c "sleep 3; echo all done"
all done
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ docker run -d -ti ubuntu bash
f5a831981abeffb8c7e5ed41f3570918287fdcd0d58f65ddd90d5f0a95791299
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ docker exec -ti eloquent_colden bash
root@f5a831981abe:/# touch foo
root@f5a831981abe:/# ls
bin   dev  foo   lib    lib64   media  opt   root  sbin  sys  usr
boot  etc  home  lib32  libx32  mnt    proc  run   srv   tmp  var
root@f5a831981abe:/# exit
azureuser@ubuntu-vm:~$ docker exec -ti eloquent_colden bash
root@f5a831981abe:/# azureuser@ubuntu-vm:~$


Terminal 2


azureuser@ubuntu-vm:~$ docker ps -al
CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES
f5a831981abe   ubuntu    "bash"    2 minutes ago   Up 
2 minutes             eloquent_colden
azureuser@ubuntu-vm:~$ docker attach eloquent_colden  
root@f5a831981abe:/#
root@f5a831981abe:/#
root@f5a831981abe:/#
root@f5a831981abe:/#
root@f5a831981abe:/#
root@f5a831981abe:/# ls
bin   etc   lib    libx32  opt   run   sys  var       
boot  foo   lib32  media   proc  sbin  tmp
dev   home  lib64  mnt     root  srv   usr
root@f5a831981abe:/#
root@f5a831981abe:/#
root@f5a831981abe:/# exit
azureuser@ubuntu-vm:~$ 


Last login: Sun Nov 28 15:46:10 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ docker run --name example -d ubuntu -c "lose /etc/password"
docker: Error response from daemon: Conflict. The container name "/example" is already in use by container "ed359e86fa42c9a920284f55ce0e2f2a80426623384f57a7f7c3ec484ef61a52". You have to remove (or rename) that container to be able to reuse that name.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --name example -d ubuntu -c "lose /etc/password"
docker: Error response from daemon: Conflict. The container name "/example" is already in use by container "ed359e86fa42c9a920284f55ce0e2f2a80426623384f57a7f7c3ec484ef61a52". You have to remove (or rename) that container to be able to reuse that name.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker logs example 
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ source ./reformat.sh
azureuser@ubuntu-vm:~$ echo $FORMAT
\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{{.Command}}\nCREATED\t{{.RunningFor}}\nSTATUS\t{{.Status}}\nPORTS\t{{.Ports}}\nNAMES\t{{.Names}}\n
azureuser@ubuntu-vm:~$ docker ps -al --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -l --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -al --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -a --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example


ID      f5a831981abe
IMAGE   ubuntu
COMMAND "bash"
CREATED 5 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   eloquent_colden


ID      1b9aeb7b76a3
IMAGE   ubuntu
COMMAND "bash -c 'sleep 3; e…"
CREATED 5 hours ago
STATUS  Exited (0) 5 hours ago
PORTS
NAMES   nice_stonebraker


ID      3484153bfff8
IMAGE   484ec39d2458
COMMAND "/bin/sh -c 'yes | a…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   quizzical_tereshkova


ID      2be16b716870
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   romantic_buck


ID      6f82bad90852
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   gifted_fermi


ID      a98a9f4c2c89
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   tender_heisenberg


ID      1a12eaaa6328
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   modest_cerf


ID      f9cf32365b09
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   reverent_brown


ID      16eb6dcc1b8d
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   boring_goldberg


ID      ab9a6ff67ac0
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   epic_napier


ID      a48521d032e7
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   vigilant_ramanujan


ID      b808acc1180b
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   elegant_proskuriakova


ID      2aa93973438e
IMAGE   my-new-image-2
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   xenodochial_mccarthy


ID      4a668fd8935a
IMAGE   a63d46cfeb1e
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   naughty_moore


ID      3c272caae2e1
IMAGE   ubuntu
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   stupefied_leavitt


ID      832fc9b0f341
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   hungry_brown


ID      cd05574cf082
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   hardcore_joliot


ID      8050290dd8e6
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (127) 2 days ago
PORTS
NAMES   happy_wu


ID      6d7eca1e7b24
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   heuristic_leavitt


ID      e7da0e4933e3
IMAGE   hello-world
COMMAND "/hello"
CREATED 9 days ago
STATUS  Exited (0) 9 days ago
PORTS
NAMES   adoring_visvesvaraya


ID      c22f9b018077
IMAGE   hello-world
COMMAND "/hello"
CREATED 9 days ago
STATUS  Exited (0) 9 days ago
PORTS
NAMES   trusting_albattani

azureuser@ubuntu-vm:~$ docker logs hungry_brown
root@832fc9b0f341:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@832fc9b0f341:/# azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -ti ubuntu bash
root@4f385ee130d5:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker rm confident_brattain 
confident_brattain
azureuser@ubuntu-vm:~$ 




Troubleshooting shell script for environmental variable



oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads/docker
~/Downloads/docker
$  ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Warning: Identity file ubuntu-vm_key.pem not accessible: No such file or directory.
azureuser@20.124.104.28: Permission denied (publickey).

oeume@KRISOLIZ-SFFHPDPC MINGW64 
~/Downloads/docker
$ cd ..

oeume@KRISOLIZ-SFFHPDPC MINGW64 
~/Downloads
$  ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
n
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ vim reformat
azureuser@ubuntu-vm:~$ vim reformat.bash
azureuser@ubuntu-vm:~$ vim reformat.bash
azureuser@ubuntu-vm:~$ pwd
/home/azureuser
azureuser@ubuntu-vm:~$  reformat.bash
reformat.bash: command not foundazureuser@ubuntu-vm:~$ ./ reformat.bash
-bash: ./: Is a directory
azureuser@ubuntu-vm:~$ ./reformat.bash
-bash: ./reformat.bash: Permission denied
azureuser@ubuntu-vm:~$ ls -la reformat.bash 
-rw-rw-r-- 1 azureuser azureuser 157 Nov 28 12:21 reformat.bash 
azureuser@ubuntu-vm:~$ chmod u+xchmod: missing operand after ‘u+x’
Try 'chmod --help' for more information.
azureuser@ubuntu-vm:~$ chmod u + x
chmod: invalid mode: ‘u’
Try 'chmod --help' for more information.
azureuser@ubuntu-vm:~$ chmod u+x
FORMAT="\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{ reformat.bash
azureuser@ubuntu-vm:~$ ls -la reformat.bash
-rwxrw-r-- 1 azureuser azureuser 157 Nov 28 12:21 reformat.bash
azureuser@ubuntu-vm:~$ chmod 0755 reformat.bash     
azureuser@ubuntu-vm:~$ ls -la reformat.bash
-rwxr-xr-x 1 azureuser azureuser 157 Nov 28 12:21 reformat.bash
azureuser@ubuntu-vm:~$ chmod 0700 reformat.bash     
azureuser@ubuntu-vm:~$ ls -la reformat.bash
-rwx------ 1 azureuser azureuser 157 Nov 28 12:21 reformat.bash
azureuser@ubuntu-vm:~$ chmod go+rx reformat.bash    
azureuser@ubuntu-vm:~$ ls -la reformat.bash
-rwxr-xr-x 1 azureuser azureuser 157 Nov 28 12:21 reformat.bash
azureuser@ubuntu-vm:~$ ./reformat.bash
./reformat.bash: line 1: n: command not found       
./reformat.bash: line 2: rt: command not found      
azureuser@ubuntu-vm:~$ vim reformat.bash
azureuser@ubuntu-vm:~$ car reformat.bash 

Command 'car' not found, but can be installed with:

sudo apt install ucommon-utils

azureuser@ubuntu-vm:~$ cat reformat.bash 
FORMAT="\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{{.Command}}\nCREATED\t{{.RunningFor}}\nSTATUS\t{{.Status}}\nPORTS\t{{.Ports}}\nNAMES\t{{.Names}}\n"     
azureuser@ubuntu-vm:~$ ./reformat.bash
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ ./reformat.bash
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ client_loop: send disconnect: Connection reset by peer

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
euser@20.124.104.28_key.pem azure
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com  
 * Support:        https://ubuntu.com/advantage     

  System information as of Sun Nov 28 15:35:23 UTC 2021

#!/bin/bash
  System load:  0.0               Processes:        
        133
  Usage of /:   8.0% of 28.90GB   Users logged in:  
        1
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4


15 updates can be applied immediately.
To see these additional updates run: apt list --upgradable
azureuser@ubuntu-vm:~$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS 
   PORTS     NAMES
azureuser@ubuntu-vm:~$ docker ps -al
CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS    PORTS     NAMES
ed359e86fa42   ubuntu    "-c 'lose /etc/passw…"   4 
hours ago   Created             example
azureuser@ubuntu-vm:~$ docker ps -al --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -a --format $FORMAT
ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example


ID      f5a831981abe
IMAGE   ubuntu
COMMAND "bash"
CREATED 4 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   eloquent_colden


ID      1b9aeb7b76a3
IMAGE   ubuntu
COMMAND "bash -c 'sleep 3; e…"
CREATED 4 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   nice_stonebraker


ID      3484153bfff8
IMAGE   484ec39d2458
COMMAND "/bin/sh -c 'yes | a…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   quizzical_tereshkova


ID      2be16b716870
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   romantic_buck


ID      6f82bad90852
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   gifted_fermi


ID      a98a9f4c2c89
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   tender_heisenberg


ID      1a12eaaa6328
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   modest_cerf


ID      f9cf32365b09
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   reverent_brown


ID      16eb6dcc1b8d
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   boring_goldberg


ID      ab9a6ff67ac0
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   epic_napier


ID      a48521d032e7
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   vigilant_ramanujan


ID      b808acc1180b
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   elegant_proskuriakova


ID      2aa93973438e
IMAGE   my-new-image-2
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   xenodochial_mccarthy


ID      4a668fd8935a
IMAGE   a63d46cfeb1e
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   naughty_moore


ID      3c272caae2e1
IMAGE   ubuntu
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   stupefied_leavitt


ID      832fc9b0f341
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   hungry_brown


ID      cd05574cf082
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   hardcore_joliot


ID      8050290dd8e6
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (127) 2 days ago
PORTS
NAMES   happy_wu
azureuser@ubuntu-vm:~$ client_loop: send disconnect: Connection reset by peer

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
azureuser@ubuntu-vm:~$ docker log happy_wu
docker: 'log' is not a docker command.
See 'docker --help'
azureuser@ubuntu-vm:~$ docker ps -a --format $FORMAT
ID      4f385ee130d5
IMAGE   ubuntu
COMMAND "bash"
CREATED 16 seconds ago        
STATUS  Up 15 seconds
PORTS
NAMES   confident_brattain    


ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example


ID      f5a831981abe
IMAGE   ubuntu
COMMAND "bash"
CREATED 5 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   eloquent_colden       


ID      1b9aeb7b76a3
IMAGE   ubuntu
COMMAND "bash -c 'sleep 3; e…"
CREATED 5 hours ago
STATUS  Exited (0) 5 hours ago
PORTS
NAMES   nice_stonebraker


ID      3484153bfff8
IMAGE   484ec39d2458
COMMAND "/bin/sh -c 'yes | a…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   quizzical_tereshkova


ID      2be16b716870
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   romantic_buck


ID      6f82bad90852
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   gifted_fermi


ID      a98a9f4c2c89
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   tender_heisenberg


ID      1a12eaaa6328
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   modest_cerf


ID      f9cf32365b09
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   reverent_brown


ID      16eb6dcc1b8d
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   boring_goldberg


ID      ab9a6ff67ac0
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   epic_napier


ID      a48521d032e7
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   vigilant_ramanujan


ID      b808acc1180b
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   elegant_proskuriakova


ID      2aa93973438e
IMAGE   my-new-image-2
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   xenodochial_mccarthy


ID      4a668fd8935a
IMAGE   a63d46cfeb1e
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   naughty_moore


ID      3c272caae2e1
IMAGE   ubuntu
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   stupefied_leavitt


ID      832fc9b0f341
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   hungry_brown


ID      cd05574cf082
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   hardcore_joliot


ID      8050290dd8e6
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (127) 2 days ago
PORTS
NAMES   happy_wu
azureuser@ubuntu-vm:~$ docker ps --format $FORMAT   

ID      4f385ee130d5      
IMAGE   ubuntu
COMMAND "bash"
CREATED 30 seconds ago    
STATUS  Up 29 seconds     
PORTS
NAMES   confident_brattain

azureuser@ubuntu-vm:~$ docker kill confident_brattain
confident_brattain
azureuser@ubuntu-vm:~$ docker ps -l --format $FORMAT
ID      4f385ee130d5
IMAGE   ubuntu
COMMAND "bash"
CREATED About a minute ago
STATUS  Exited (137) 23 seconds ago
PORTS
NAMES   confident_brattain

azureuser@ubuntu-vm:~$ docker ps -l --format $FORMAT
ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$


Exposing a specific port


azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --name example -d ubuntu -c "lose /etc/password"
docker: Error response from daemon: Conflict. The container name "/example" is already in use by container "ed359e86fa42c9a920284f55ce0e2f2a80426623384f57a7f7c3ec484ef61a52". You have to remove (or rename) that container to be able to reuse that name.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker logs example 
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ source ./reformat.sh
azureuser@ubuntu-vm:~$ echo $FORMAT
\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{{.Command}}\nCREATED\t{{.RunningFor}}\nSTATUS\t{{.Status}}\nPORTS\t{{.Ports}}\nNAMES\t{{.Names}}\n
azureuser@ubuntu-vm:~$ docker ps -al --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -l --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -al --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps -a --format $FORMAT

ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example


ID      f5a831981abe
IMAGE   ubuntu
COMMAND "bash"
CREATED 5 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   eloquent_colden


ID      1b9aeb7b76a3
IMAGE   ubuntu
COMMAND "bash -c 'sleep 3; e…"
CREATED 5 hours ago
STATUS  Exited (0) 5 hours ago
PORTS
NAMES   nice_stonebraker


ID      3484153bfff8
IMAGE   484ec39d2458
COMMAND "/bin/sh -c 'yes | a…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   quizzical_tereshkova


ID      2be16b716870
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   romantic_buck


ID      6f82bad90852
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   gifted_fermi


ID      a98a9f4c2c89
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   tender_heisenberg


ID      1a12eaaa6328
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   modest_cerf


ID      f9cf32365b09
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   reverent_brown


ID      16eb6dcc1b8d
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   boring_goldberg


ID      ab9a6ff67ac0
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   epic_napier


ID      a48521d032e7
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   vigilant_ramanujan


ID      b808acc1180b
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   elegant_proskuriakova


ID      2aa93973438e
IMAGE   my-new-image-2
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   xenodochial_mccarthy


ID      4a668fd8935a
IMAGE   a63d46cfeb1e
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   naughty_moore


ID      3c272caae2e1
IMAGE   ubuntu
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   stupefied_leavitt


ID      832fc9b0f341
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   hungry_brown


ID      cd05574cf082
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   hardcore_joliot


ID      8050290dd8e6
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (127) 2 days ago
PORTS
NAMES   happy_wu


ID      6d7eca1e7b24
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   heuristic_leavitt


ID      e7da0e4933e3
IMAGE   hello-world
COMMAND "/hello"
CREATED 9 days ago
STATUS  Exited (0) 9 days ago
PORTS
NAMES   adoring_visvesvaraya


ID      c22f9b018077
IMAGE   hello-world
COMMAND "/hello"
CREATED 9 days ago
STATUS  Exited (0) 9 days ago
PORTS
NAMES   trusting_albattani

azureuser@ubuntu-vm:~$ docker logs hungry_brown
root@832fc9b0f341:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@832fc9b0f341:/# azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -ti ubuntu bash
root@4f385ee130d5:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker rm confident_brattain 
confident_brattain
azureuser@ubuntu-vm:~$ Connection to 20.124.104.28 closed by remote host.
Connection to 20.124.104.28 closed.

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
azureuser@ubuntu-vm:~$ docker run --rm -ti - p 45678:45678 -p45679:45679 --name echo-server ubuntu:20.04 bash
docker: invalid reference format.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run --rm -ti - p 45678:45678 -p45679:45679 --name echo-server ubuntu bash
docker: invalid reference format.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run --rm -ti - p 45678:45678 -p 45679:45679 --name echo-server ubuntu:20.04 bash
docker: invalid reference format.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run --rm -ti - p 45678:45678 -p 45679:45679 --name echo-server ubuntu:bash
docker: invalid reference format.
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run --rm -ti -p 45678:45678 -p 45679:45679 --name echo-server ubuntu:20.04 bash
Unable to find image 'ubuntu:20.04' locally
20.04: Pulling from library/ubuntu
Digest: sha256:626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322
Status: Downloaded newer image for ubuntu:20.04
root@675787ab4595:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti -p 45678:45678 -p 45679:45679 --name echo-server ubuntu bash
root@bdfdd8ab55e4:/# nc -lp 45678 | nc -lp 45679
bash: nc: command not found
bash: nc: command not found
root@bdfdd8ab55e4:/#
root@bdfdd8ab55e4:/# 
root@bdfdd8ab55e4:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti -p 45678:45678 -p 45679:45679 --name echo-server ubuntu:14.04 bash
Unable to find image 'ubuntu:14.04' locally
14.04: Pulling from library/ubuntu
2e6e20c8e2e6: Pull complete
0551a797c01d: Pull complete
512123a864da: Pull complete
Digest: sha256:60840958b25b5947b11d7a274274dc48ab32a2f5d18527f5dae2962b64269a3a
Status: Downloaded newer image for ubuntu:14.04
root@8801e2314d06:/# nc -lp 45678 | nc -lp 45678
nc: listen: Address already in use
lets go!
lets go2

^C
root@8801e2314d06:/# nc -lp 45678 | nc -lp 45679
root@8801e2314d06:/# ^C
root@8801e2314d06:/# ps -ef
UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  0 00:53 pts/0    00:00:00 bash
root          20       1  0 00:59 pts/0    00:00:00 ps -ef
root@8801e2314d06:/# ps -ef grep nc
error: process ID list syntax error

Usage:
 ps [options]

 Try 'ps --help <simple|list|output|threads|misc|all>'
  or 'ps --help <s|l|o|t|m|a>'
 for additional help text.

For more details see ps(1).
root@8801e2314d06:/# nc -lp 45678 | nc -lp 45679
hello world
hello world from outward port
root@8801e2314d06:/# ^C
root@8801e2314d06:/# 
root@8801e2314d06:/# 
root@8801e2314d06:/# nc -lp 45678 | nc -lp 45679


Now am typing from another container

Ob
Obviously this is the same as the master container where I started from

^C
root@8801e2314d06:/# ^C
root@8801e2314d06:/# exit
exit
azureuser@ubuntu-vm:~$ docker run --rm -ti -p 45678 -p 45679 --name echo-server ubuntu:14.04 bash
root@c98e3e17b6d9:/# nc -lp 45678 | nc -lp 45679


^C
root@c98e3e17b6d9:/# exit
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti -p 45678/udp --name echo-server ubuntu:14.04 bash
root@e35b1ee086e9:/# nc -ulp 45678
Hello world from udp perspective in docker




oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
azureuser@ubuntu-vm:~$ docker log happy_wu
docker: 'log' is not a docker command.
See 'docker --help'
azureuser@ubuntu-vm:~$ docker ps -a --format $FO
ID      4f385ee130d5
IMAGE   ubuntu
COMMAND "bash"
CREATED 16 seconds ago        
STATUS  Up 15 seconds
PORTS
NAMES   confident_brattain    


ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example


ID      f5a831981abe
IMAGE   ubuntu
COMMAND "bash"
CREATED 5 hours ago
STATUS  Exited (0) 4 hours ago
PORTS
NAMES   eloquent_colden       


ID      1b9aeb7b76a3
IMAGE   ubuntu
COMMAND "bash -c 'sleep 3; e…"
CREATED 5 hours ago
STATUS  Exited (0) 5 hours ago
PORTS
NAMES   nice_stonebraker


ID      3484153bfff8
IMAGE   484ec39d2458
COMMAND "/bin/sh -c 'yes | a…"
CREATED 28 hours ago
STATUS  Exited (100) 28 hours ago
PORTS
NAMES   quizzical_tereshkova


ID      2be16b716870
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   romantic_buck


ID      6f82bad90852
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 28 hours ago
STATUS  Exited (1) 28 hours ago
PORTS
NAMES   gifted_fermi


ID      a98a9f4c2c89
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   tender_heisenberg


ID      1a12eaaa6328
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   modest_cerf


ID      f9cf32365b09
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   reverent_brown


ID      16eb6dcc1b8d
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   boring_goldberg


ID      ab9a6ff67ac0
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (100) 29 hours ago
PORTS
NAMES   epic_napier


ID      a48521d032e7
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   vigilant_ramanujan


ID      b808acc1180b
IMAGE   913ff2e46b29
COMMAND "/bin/sh -c 'apt-get…"
CREATED 29 hours ago
STATUS  Exited (1) 29 hours ago
PORTS
NAMES   elegant_proskuriakova


ID      2aa93973438e
IMAGE   my-new-image-2
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   xenodochial_mccarthy


ID      4a668fd8935a
IMAGE   a63d46cfeb1e
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   naughty_moore


ID      3c272caae2e1
IMAGE   ubuntu
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   stupefied_leavitt


ID      832fc9b0f341
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (129) 2 days ago
PORTS
NAMES   hungry_brown


ID      cd05574cf082
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (0) 2 days ago
PORTS
NAMES   hardcore_joliot


ID      8050290dd8e6
IMAGE   ubuntu:latest
COMMAND "bash"
CREATED 2 days ago
STATUS  Exited (127) 2 days ago
PORTS
NAMES   happy_wu
azureuser@ubuntu-vm:~$ docker ps --format $FORMA

ID      4f385ee130d5      
IMAGE   ubuntu
COMMAND "bash"
CREATED 30 seconds ago    
STATUS  Up 29 seconds     
PORTS
NAMES   confident_brattain

azureuser@ubuntu-vm:~$ docker kill confident_bran
confident_brattain
azureuser@ubuntu-vm:~$ docker ps -l --format $FO
ID      4f385ee130d5
IMAGE   ubuntu
COMMAND "bash"
CREATED About a minute ago
STATUS  Exited (137) 23 seconds ago
PORTS
NAMES   confident_brattain

azureuser@ubuntu-vm:~$ docker ps -l --format $FO
ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 4 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ Connection to 20.124.104.losed by remote host.
Connection to 20.124.104.28 closed.

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
azureuser@ubuntu-vm:~$ hostname
ubuntu-vm
azureuser@ubuntu-vm:~$ hostnamectl
   Static hostname: ubuntu-vm
         Icon name: computer-vm
           Chassis: vm
        Machine ID: bc3fe1188f2c49a6bdacc7486d2f           Boot ID: 20f150df56544a1dae2af1d4146e    Virtualization: microsoft
  Operating System: Ubuntu 20.04.3 LTS     
            Kernel: Linux 5.11.0-1021-azure
      Architecture: x86-64
azureuser@ubuntu-vm:~$ docker ps -l --format $FOflag needs an argument: --format
See 'docker ps --help'.
azureuser@ubuntu-vm:~$ echo $FORMAT

azureuser@ubuntu-vm:~$ source ./reformat.sh
azureuser@ubuntu-vm:~$ echo $FORMAT
\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{{.Cod}}\nCREATED\t{{.RunningFor}}\nSTATUS\t{{.StatusPORTS\t{{.Ports}}\nNAMES\t{{.Names}}\n
azureuser@ubuntu-vm:~$ docker ps -l --format $FO
ID      675787ab4595
IMAGE   ubuntu:20.04
COMMAND "bash"
CREATED About a minute ago
STATUS  Up About a minute
PORTS   0.0.0.0:45678-45679->45678-45679/tcp, ::78-45679->45678-45679/tcp
NAMES   echo-server

azureuser@ubuntu-vm:~$ docker kill echo-server 
echo-server
azureuser@ubuntu-vm:~$ docker rm echo-server
Error: No such container: echo-server
azureuser@ubuntu-vm:~$ docker ps -l --format $FO
ID      ed359e86fa42
IMAGE   ubuntu
COMMAND "-c 'lose /etc/passw…"
CREATED 13 hours ago
STATUS  Created
PORTS
NAMES   example

azureuser@ubuntu-vm:~$ docker ps --format $FORMA
azureuser@ubuntu-vm:~$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STA
   PORTS     NAMES
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE            COMMAND
     CREATED        STATUS                      S     NAMES
ed359e86fa42   ubuntu           "-c 'lose /etc/p…"   13 hours ago   Created
      example
f5a831981abe   ubuntu           "bash"
     13 hours ago   Exited (0) 13 hours ago
      eloquent_colden
1b9aeb7b76a3   ubuntu           "bash -c 'sleep …"   13 hours ago   Exited (0) 13 hours ago
      nice_stonebraker
3484153bfff8   484ec39d2458     "/bin/sh -c 'yes…"   37 hours ago   Exited (100) 37 hours ago   
      quizzical_tereshkova
2be16b716870   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (1) 37 hours ago
      romantic_buck
6f82bad90852   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (1) 37 hours ago
      gifted_fermi
a98a9f4c2c89   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (1) 37 hours ago
      tender_heisenberg
1a12eaaa6328   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (100) 37 hours ago   
      modest_cerf
f9cf32365b09   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (100) 37 hours ago   
      reverent_brown
16eb6dcc1b8d   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (1) 37 hours ago
      boring_goldberg
ab9a6ff67ac0   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (100) 37 hours ago   
      epic_napier
a48521d032e7   913ff2e46b29     "/bin/sh -c 'apt…"   37 hours ago   Exited (1) 37 hours ago
      vigilant_ramanujan
b808acc1180b   913ff2e46b29     "/bin/sh -c 'apt…"   38 hours ago   Exited (1) 38 hours agoazureuser@ubuntu-vm:~$ docker kill echo-server
echo-server
azureuser@ubuntu-vm:~$ docker ps -a
CONTAINER ID   IMAGE            COMMAND   
               CREATED        STATUS      
                PORTS     NAMES
ed359e86fa42   ubuntu           "-c 'lose 
/etc/passw…"   13 hours ago   Created     
                          example
f5a831981abe   ubuntu           "bash"    
               13 hours ago   Exited (0) 13 hours ago               eloquent_colden 
1b9aeb7b76a3   ubuntu           "bash -c 'sleep 3; e…"   13 hours ago   Exited (0) 13 hours ago               nice_stonebraker3484153bfff8   484ec39d2458     "/bin/sh -c 'yes | a…"   37 hours ago   Exited (100) 37 hours ago             quizzical_tereshkova
2be16b716870   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (1) 37 hours ago               romantic_buck   
6f82bad90852   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (1) 37 hours ago               gifted_fermi    
a98a9f4c2c89   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (1) 37 hours ago               tender_heisenberg
1a12eaaa6328   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (100) 37 hours ago             modest_cerf     
f9cf32365b09   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (100) 37 hours ago             reverent_brown  
16eb6dcc1b8d   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (1) 37 hours ago               boring_goldberg 
ab9a6ff67ac0   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (100) 37 hours ago             epic_napier     
a48521d032e7   913ff2e46b29     "/bin/sh -c 'apt-get…"   37 hours ago   Exited (1) 37 hours ago               vigilant_ramanujan
b808acc1180b   913ff2e46b29     "/bin/sh -c 'apt-get…"   38 hours ago   Exited (1) 38 hours ago               elegant_proskuriakova
2aa93973438e   my-new-image-2   "bash"    
               2 days ago     Exited (129) 2 days ago               xenodochial_mccarthy
azureuser@ubuntu-vm:~$ nc localhost 45678        
lets go!
lets go2
lets go again
^C
azureuser@ubuntu-vm:~$ nc localhost 45678        
here we go again
^C
azureuser@ubuntu-vm:~$ docker ps --format $FORMAT 
ID      8801e2314d06
IMAGE   ubuntu:14.04
COMMAND "bash"
CREATED 7 minutes ago
STATUS  Up 7 minutes
PORTS   0.0.0.0:45678-45679->45678-45679/tcp, :::45678-45679->45678-45679/tcp
NAMES   echo-server

azureuser@ubuntu-vm:~$ nc localhost 45678        
welcome to docker
hello world
hello world from inward port 

^C
azureuser@ubuntu-vm:~$ docker run --rm -ti ubuntu:14.04 bash
root@5c25ccf524b1:/# nc host.docker.internal 45678
nc: getaddrinfo: Name or service not known
root@5c25ccf524b1:/#
root@5c25ccf524b1:/# 
root@5c25ccf524b1:/# 
root@5c25ccf524b1:/# docker ps -a
bash: docker: command not found
root@5c25ccf524b1:/# exit
exit
azureuser@ubuntu-vm:~$ nc -add-host=host.docker.internal:45678
nc: invalid option -- 'a'
usage: nc [-46CDdFhklNnrStUuvZz] [-I length] [-i 
interval] [-M ttl]
          [-m minttl] [-O length] [-P proxy_username] [-p source_port]
          [-q seconds] [-s source] [-T keyword] [-V rtable] [-W recvlimit] [-w timeout]
          [-X proxy_protocol] [-x proxy_address[:port]]    [destination] [port]
azureuser@ubuntu-vm:~$ nc -add-host=host.docker.internal 45678
nc: invalid option -- 'a'
usage: nc [-46CDdFhklNnrStUuvZz] [-I length] [-i 
interval] [-M ttl]
          [-m minttl] [-O length] [-P proxy_username] [-p source_port]
          [-q seconds] [-s source] [-T keyword] [-V rtable] [-W recvlimit] [-w timeout]
          [-X proxy_protocol] [-x proxy_address[:port]]    [destination] [port]
azureuser@ubuntu-vm:~$ nc --add-host=host.docker.internal:45678
nc: invalid option -- '-'
usage: nc [-46CDdFhklNnrStUuvZz] [-I length] [-i 
interval] [-M ttl]
          [-m minttl] [-O length] [-P proxy_username] [-p source_port]
          [-q seconds] [-s source] [-T keyword] [-V rtable] [-W recvlimit] [-w timeout]
          [-X proxy_protocol] [-x proxy_address[:port]]    [destination] [port]
azureuser@ubuntu-vm:~$ --add-host=host.docker.internal:45678
--add-host=host.docker.internal:45678: command not found
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal:45678 ubuntu:14.04 bash     
invalid argument "host.docker.internal:45678" for "--add-host" flag: invalid IP address in add-host: "45678"
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal:45678 ubuntu bash
invalid argument "host.docker.internal:45678" for "--add-host" flag: invalid IP address in add-host: "45678"
See 'docker run --help'.
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal 45678 ubuntu bash
invalid argument "host.docker.internal" for "--add-host" flag: bad format for add-host: "host.docker.internal"
See 'docker run --help'.
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal:host-gateway ubuntu bash    
root@2ef65fc67535:/#
root@2ef65fc67535:/#
root@2ef65fc67535:/#
root@2ef65fc67535:/# nc host.docker.internal 45678
bash: nc: command not found
root@2ef65fc67535:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal:host-gateway ubuntu:14.04 bash
root@506c83a070ca:/# nc host..docker.internal 45678
nc: getaddrinfo: Name or service not known
root@506c83a070ca:/# nc host.docker.internal 45678
Here we go again solving the problem of not having netcat

root@506c83a070ca:/#
root@506c83a070ca:/# 
root@506c83a070ca:/# 
root@506c83a070ca:/# 
root@506c83a070ca:/# docker port echo-server
bash: docker: command not found
root@506c83a070ca:/# ^C
root@506c83a070ca:/# exit
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker port echo-server 
45678/tcp -> 0.0.0.0:49154
45678/tcp -> :::49154
45679/tcp -> 0.0.0.0:49153
45679/tcp -> :::49153
azureuser@ubuntu-vm:~$ nc localhost 49154
does this work?
yes      
azureuser@ubuntu-vm:~$ docker port echo-server   
45678/udp -> 0.0.0.0:49153
45678/udp -> :::49153
azureuser@ubuntu-vm:~$ nc localhost 49153
azureuser@ubuntu-vm:~$ docker port echo-server 
45678/udp -> 0.0.0.0:49153
45678/udp -> :::49153
azureuser@ubuntu-vm:~$ nc localhost 49153        
azureuser@ubuntu-vm:~$ nc -u localhost 49153     
Hello world from udp perspective in docker




azureuser@ubuntu-vm:~$ docker rm strange_neumann      
strange_neumann
azureuser@ubuntu-vm:~$ docker ps -l
CONTAINER ID   IMAGE       
   COMMAND   CREATED       
   STATUS          PORTS   


          NAMES
8801e2314d06   ubuntu:14.04   "bash"    40 minutes ago   Up 40 minutes   0.0.0.0:45678-45679->45678-45679/tcp, :::45678-45679->45678-45679/tcp   echo-server      
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run -it --add-host=host.docker.internal:host-gateway ubuntu:14.04 bash        
root@8767b97aed1f:/# nc host.docker.internal 45679    
Here we go again solving the problem of not having netcat


Now am typing from another 
container

Ob        
Obviously this is the same 
as the master container where I started from
root@8767b97aed1f:/# exit  
azureuser@ubuntu-vm:~$ nc localhost 49153
does this work?
yes
^C
azureuser@ubuntu-vm:~$ 


CONNECTING BETWEEN CONTAINERS: CONTAINER NETWORKING

PC1


oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Nov 29 07:25:03 UTC 2021

  System load:  0.51              Processes:                139       
  Usage of /:   8.8% of 28.90GB   Users logged in:          0
  Memory usage: 4%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:    10.0.0.4  

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

15 updates can be applied immediately.
To see these additional updates run: apt list --upgradable


Last login: Mon Nov 29 00:21:45 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker network ls
NETWORK ID     NAME      DRIVER    SCOPE
08ff07190912   bridge    bridge    local
0bc03ec04937   host      host      local
5ce82a6c1d14   none      null      local
azureuser@ubuntu-vm:~$ docker network create learning
1f8262c161b6de95011d171ca12d8470f891a522f7b6173f5037757c82139672
azureuser@ubuntu-vm:~$ logout
Connection to 20.124.104.28 closed.

oeume@KRISOLIZ-SFFHPDPC MINGW64 ~/Downloads
$ ssh -i ubuntu-vm_key.pem azureuser@20.124.104.28
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.11.0-1021-azure x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon Nov 29 07:28:24 UTC 2021

  System load:  0.02              Users logged in:                  0
  Usage of /:   8.8% of 28.90GB   IPv4 address for br-1f8262c161b6: 172.18.0.1
  Memory usage: 4%                IPv4 address for docker0:         172.17.0.1
  Swap usage:   0%                IPv4 address for eth0:            10.0.0.4
  Processes:    138

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

15 updates can be applied immediately.
To see these additional updates run: apt list --upgradable


Last login: Mon Nov 29 07:25:04 2021 from 73.152.119.181
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti --net learning --name catserver ubuntu:14.04
root@995fb85f7dae:/# azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti --net learning --name catserver ubuntu:14.04 bash
root@0d99b3acc6b3:/# ping catserver
PING catserver (172.18.0.2) 56(84) bytes of data.
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=1 ttl=64 time=0.028 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=2 ttl=64 time=0.054 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=3 ttl=64 time=0.050 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=4 ttl=64 time=0.059 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=5 ttl=64 time=0.062 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=6 ttl=64 time=0.056 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=7 ttl=64 time=0.060 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=8 ttl=64 time=0.061 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=9 ttl=64 time=0.059 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=10 ttl=64 time=0.070 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=11 ttl=64 time=0.062 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=12 ttl=64 time=0.049 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=13 ttl=64 time=0.068 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=14 ttl=64 time=0.064 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=15 ttl=64 time=0.051 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=16 ttl=64 time=0.066 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=17 ttl=64 time=0.048 ms
^Z
[1]+  Stopped                 ping catserver
root@0d99b3acc6b3:/# 
root@0d99b3acc6b3:/# 
root@0d99b3acc6b3:/# ping dogserver
ping: unknown host dogserver
root@0d99b3acc6b3:/# ping dogserver
PING dogserver (172.18.0.3) 56(84) bytes of data.
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=1 ttl=64 time=0.307 ms
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=2 ttl=64 time=0.096 ms
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=3 ttl=64 time=0.099 ms
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=4 ttl=64 time=0.082 ms
^C
--- dogserver ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3070ms
rtt min/avg/max/mdev = 0.082/0.146/0.307/0.093 ms
root@0d99b3acc6b3:/# ping catserver
PING catserver (172.18.0.2) 56(84) bytes of data.
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=1 ttl=64 time=0.036 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=2 ttl=64 time=0.051 ms
64 bytes from 0d99b3acc6b3 (172.18.0.2): icmp_seq=3 ttl=64 time=0.065 ms
^C
--- catserver ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2031ms
rtt min/avg/max/mdev = 0.036/0.050/0.065/0.014 ms
root@0d99b3acc6b3:/#
root@0d99b3acc6b3:/# 
root@0d99b3acc6b3:/# nc dogserver 1234
meow
woot


root@0d99b3acc6b3:/# ping dogserver
PING dogserver (172.18.0.3) 56(84) bytes of data.
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=1 ttl=64 time=0.076 ms
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=2 ttl=64 time=0.146 ms
64 bytes from dogserver.learning (172.18.0.3): icmp_seq=3 ttl=64 time=0.074 ms
^C
--- dogserver ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2041ms
rtt min/avg/max/mdev = 0.074/0.098/0.146/0.035 ms
root@0d99b3acc6b3:/# ping bobcatserver
PING bobcatserver (172.19.0.3) 56(84) bytes of data.
64 bytes from bobcatserver.catsonly (172.19.0.3): icmp_seq=1 ttl=64 time=0.122 ms        
64 bytes from bobcatserver.catsonly (172.19.0.3): icmp_seq=2 ttl=64 time=0.097 ms
64 bytes from bobcatserver.catsonly (172.19.0.3): icmp_seq=3 ttl=64 time=0.077 ms
64 bytes from bobcatserver.catsonly (172.19.0.3): icmp_seq=4 ttl=64 time=0.074 ms
^C
--- bobcatserver ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3073ms
rtt min/avg/max/mdev = 0.074/0.092/0.122/0.021 ms
root@0d99b3acc6b3:/# 


SERVER - DOGSERVER

azureuser@ubuntu-vm:~$ docker run --rm -ti --net 
--net learning --name dogserver ubuntu:14.04 bash
root@4978e9fc500b:/# nc -lp 1234
meow
woot


^C
root@4978e9fc500b:/# ping catserver
PING catserver (172.18.0.2) 56(84) bytes of data.
64 bytes from catserver.learning (172.18.0.2): icmp_seq=1 ttl=64 time=0.098 ms        
64 bytes from catserver.learning (172.18.0.2): icmp_seq=2 ttl=64 time=0.086 ms        
^C
--- catserver ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1022ms
rtt min/avg/max/mdev = 0.086/0.092/0.098/0.006 ms
root@4978e9fc500b:/# 
root@4978e9fc500b:/# 
root@4978e9fc500b:/# ping bobcatserver
ping: unknown host bobcatserver
root@4978e9fc500b:/# 


CATSONLY NETWORK/SERVER

azureuser@ubuntu-vm:~$ docker network create catsonly
2d1a32af292479ad6801d2d8d8597b9e5fdad95b4ff5cc5d5e32d0bdc3249763
azureuser@ubuntu-vm:~$ docker network connect catsonly catserver
azureuser@ubuntu-vm:~$ docker run --rm -ti --net catsonly --name bobcatserver ubuntu:14.04 bash    
root@80bdba4521c1:/#
root@80bdba4521c1:/#
root@80bdba4521c1:/#
root@80bdba4521c1:/# ping catserver
PING catserver (172.19.0.2) 56(84) bytes of data.
64 bytes from catserver.catsonly 
(172.19.0.2): icmp_seq=1 ttl=64 time=0.172 ms
64 bytes from catserver.catsonly 
(172.19.0.2): icmp_seq=2 ttl=64 time=0.079 ms
64 bytes from catserver.catsonly 
(172.19.0.2): icmp_seq=3 ttl=64 time=0.093 ms
^C
--- catserver ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2054ms    
rtt min/avg/max/mdev = 0.079/0.114/0.172/0.042 ms
root@80bdba4521c1:/#
root@80bdba4521c1:/# 
root@80bdba4521c1:/# ping dogserver
ping: unknown host dogserver
root@80bdba4521c1:/#
root@80bdba4521c1:/# 



LEGACY LINKING

PC 1

azureuser@ubuntu-vm:~$ 
azureuser@ubuntu-vm:~$ docker run --rm -ti -e SECRET=iloverunningcommands --name catserver ubuntu:14.04 bash
root@8e289365ce1c:/# nc -lp 1234
woot
meow
^C
root@8e289365ce1c:/# nc dogserver 4321
nc: getaddrinfo: Name or service not known
root@8e289365ce1c:/# 
root@8e289365ce1c:/# 
root@8e289365ce1c:/# env
HOSTNAME=8e289365ce1c
SECRET=iloverunningcommands
TERM=xterm
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/
SHLVL=1
HOME=/root
LESSOPEN=| /usr/bin/lesspipe %s
LESSCLOSE=/usr/bin/lesspipe %s %s
_=/usr/bin/env
root@8e289365ce1c:/#


azureuser@ubuntu-vm:~$ docker run --rm -ti 
--link catserver --name dogserver ubuntu:14.04 bash
root@739e52849c23:/# nc catserver 1234
woot
meow
root@739e52849c23:/# nc -lp 4321
^C
root@739e52849c23:/# 
root@739e52849c23:/# 
root@739e52849c23:/# env
HOSTNAME=739e52849c23
TERM=xterm
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/
SHLVL=1
HOME=/root
LESSOPEN=| /usr/bin/lesspipe %s
CATSERVER_NAME=/dogserver/catserver        
CATSERVER_ENV_SECRET=iloverunningcommands  
LESSCLOSE=/usr/bin/lesspipe %s %s
_=/usr/bin/env
root@739e52849c23:/#



